<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Man</title>
  <style>
        .scene{
          background-color:white;
          position:absolute;
          top:0px;
          width:100%;
          border:solid 1px black;
        }
        .brick{
            width:100px;
            height:10px;
            background-color:red;
            border:solid 1px black;
            position:absolute;

        }
        #man
        {
          position:absolute;
          left:50%;
        }
    </style>
  <script>
        function init()
        {
          
          //alert(Math.random()*20);
          var bg=document.getElementById("bg");
          var man=document.getElementById("man");
          //alert(bg.id);
          var BRICK_NUM=20;
          var BG_HEIGHT=2000;
          var BG_WIDTH=800;
          var bg_speed=-20;
          var man_speed=20;
          for(var i=0;i<BRICK_NUM;i++)
          {

             var top=Math.random()*BG_HEIGHT;
             top=parseInt(top)+"px";
             var left=Math.random()*BG_WIDTH;
             left=parseInt(left)+"px";
             var snippet="<div class=\"brick\" style=\"top:"+top+";left:" + left+  "\" ></div>";
             bg.innerHTML+=snippet;
          }

          var fn=function()
          {
             move(bg,bg_speed);
             move(man,man_speed);

          } 
          setInterval(fn,1000);
        }
         /*
             2013-04-08 basilwang refactor move function
             params:
                    object_to_move
                    speed  can be negative

          */
        var move=function(object_to_move,speed)
          {
              var int_top=parseInt(object_to_move.style.top);
               int_top = isNaN(int_top)?0:parseInt(int_top);

               int_top+=speed;

               console.log("object_to_move "+object_to_move.id+"'s offsetParent is "+object_to_move.offsetParent);
               console.log("object_to_move "+object_to_move.id+ "'s top is " + object_to_move.style.top);
               object_to_move.style.top=int_top+"px";   

          }
        //init();
    </script>
</head>
<body onload="init()">
  <div id="bg" class="scene" style="height:3000px;">
    </div>
  <img src="mario_small.png" alt="" id="man">
</body>
</html>